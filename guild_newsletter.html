<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
  </head>
  <body style="
    margin: 0;
    padding: 0;
    background-image: url('cid:newsletterBackground');
    background-size: contain;
    background-position: top;
    background-repeat: no-repeat;
    background-color: #060610;
    height: 1200px;
  ">
    <!-- Newsletter Content -->
    <div style="
      position: relative;
      width: 600px;
      min-height: 1000px;
      margin: 0 auto;
      padding: 40px;
      color: white;
      box-sizing: border-box;
    ">
      <!-- Main Content -->
      <div class="newsletter-content" style="height: 90%;">
        <!-- Debug Info -->
        <? Logger.log('Template received contentSections: ' + JSON.stringify(contentSections, null, 2)); ?>
        
        <!-- Date -->
        <p style="text-align: center;"><?= monthYear ?></p>

        <!-- Dynamic Content -->
        <? 
          Logger.log('Starting content loop');
          if (contentSections) {
            Logger.log('Number of sections to process: ' + Object.keys(contentSections).length);
            for (const [key, value] of Object.entries(contentSections)) { 
              Logger.log(`Processing section "${key}" with value: "${value}"`);
        ?>
          <div class="content-section">
            <?!= value ?>
          </div>
        <?    }
          } else {
            Logger.log('Warning: contentSections is undefined or null');
          }
        ?>
        
        <!-- div Spacer -->
         <div style="
         min-height: 150px;
         ">
         
        </div>
        <!-- Footer -->
        <div style="
          position: absolute;
          min-height: 50px;
          width: 100%;
          text-align: center;
          color: white;
        ">
          <p>Â© <?= year ?> Asteres Technologies LLC. All rights reserved.</p>
        </div>
      </div>
    </div>
  </body>
</html>
